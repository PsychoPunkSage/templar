# Templar â€” Product Specification Document

> _A context-aware, layout-optimized, AI-powered resume generation platform_

---

## Table of Contents

1. [Product Vision](#1-product-vision)
2. [The Context Engine](#2-the-context-engine)
3. [Resume Generation Engine](#3-the-resume-generation-engine)
4. [Layout Optimization System](#4-layout-optimization-system)
5. [Editing Experience](#5-the-editing-experience)
6. [User Controls & Customization](#6-user-controls--customization)
7. [Intelligence Features](#7-intelligence-features)
8. [Trust, Accuracy & Anti-Hallucination](#8-trust-accuracy--anti-hallucination)
9. [Additional Power Features](#9-additional-power-features)
10. [Business Model & Tiers](#10-business-model--tiers)
11. [Technical Architecture](#11-technical-architecture)
12. [Open Problems & Engineering Challenges](#12-open-problems--engineering-challenges)

---

## 1. Product Vision

Templar is not a resume formatter. It is an **intelligent career document engine** that understands who you are professionally, understands what a specific job is asking for, and generates a document that bridges the two â€” with surgical precision, zero wasted space, and zero fabricated claims.

### Core Thesis

Most resume tools fail at one of three things:

- They reformat without reasoning (dumb formatters)
- They generate without grounding (hallucination-prone AI tools)
- They optimize for aesthetics but not for fit (template marketplaces)

Templar does none of these. It reasons from a **deep, verified, living context** about the user, strategizes against a specific job description, and produces output constrained by both **layout physics** and **factual integrity**.

### North Star Metric

_"Every resume generated by Templar must be something the user could defend in an interview, line by line, with zero embarrassment."_

---

## 2. The Context Engine

The Context Engine is the **brain of the product**. It is a living, structured knowledge base about the user's professional life â€” not a static file, but an active system that grows, self-corrects, and scores itself.

### 2.1 What It Stores

The context is a richly structured `.md` file (and its internal representation) containing:

- **Personal Information** â€” Name, contact, links (GitHub, LinkedIn, portfolio)
- **Education** â€” Degrees, institutions, graduation years, GPA (if strong), relevant coursework, honors
- **Work Experience** â€” Company, role, duration, team size, reporting structure, tech stack used, outcomes achieved
- **Projects** â€” Name, description, tech stack, your specific contribution, measurable outcome, links, status (live / archived / open-source)
- **Skills** â€” Categorized (languages, frameworks, tools, platforms, soft skills), with proficiency indicators
- **Publications / Research** â€” Title, venue, year, your role, impact (citations, downloads)
- **Open Source Contributions** â€” Repository, PR count, scope of contribution, merged vs. proposed
- **Awards & Recognition** â€” What, when, from whom, scale of competition
- **Certifications** â€” Issuer, date, expiry
- **Extracurriculars & Leadership** â€” Role, organization, impact

### 2.2 Impact Quantification Layer

> The system must **actively reject vague claims** at the point of entry.

Every work experience bullet and project bullet stored in the context must pass an **impact validation check**:

| Claim Type              | Accepted Form                                    | Rejected Form                    |
| ----------------------- | ------------------------------------------------ | -------------------------------- |
| Performance improvement | "Reduced API latency by 40% (P99, production)"   | "Improved API performance"       |
| Scale                   | "Processed 2M transactions/day"                  | "Handled large scale traffic"    |
| Ownership               | "Sole author of the consensus monitoring module" | "Worked on consensus monitoring" |
| Collaboration           | "Led a team of 4 across 2 timezones"             | "Worked with a team"             |

The input service (the `.md` updater) should **prompt the user to quantify** before storing. Example:

```
You said: "Improved the bridge relayer throughput"
Templar asks: By how much? Under what conditions? Over what timeframe?
You say: "3x throughput, from ~500 TPS to ~1500 TPS, under peak cross-chain load"
Stored as: "Tripled bridge relayer throughput from 500 TPS to 1,500 TPS under peak cross-chain load conditions"
```

If the user genuinely cannot quantify (e.g., internal tooling with no metrics), the system accepts a **qualitative confidence marker** (`[LOW_METRICS]`) and deprioritizes that bullet in competitive JD fits.

### 2.3 Recency & Relevance Scoring

Each context entry carries metadata:

```yaml
entry_id: proj_001
title: "VAYU-NET Swarm Framework"
date_end: 2025-03
recency_score: 0.92 # decays over time, configurable
impact_score: 0.87 # derived from quantification completeness
tags: [rust, swarm, GPS-denied, autonomous-systems, embedded]
flagged_evergreen: false # if true, recency decay is disabled
```

- Recency score decays on a **configurable half-life** (default: 18 months to 50%)
- Users can mark entries as `evergreen` (e.g., a landmark publication, a major open-source project)
- Combined score = `0.5 * recency + 0.3 * impact + 0.2 * jd_relevance` (weights configurable per user)

### 2.4 Versioning

The context file is **fully versioned**:

- Every update creates a snapshot
- Users can roll back to any prior state
- Diffs are shown clearly: what was added, changed, or removed
- Export any version as `.md` or `.json`

### 2.5 Completeness Score

The system continuously evaluates the context and surfaces gaps:

```
Context Health Report:
  âœ… Education         â€” 100% complete
  âœ… Work Experience   â€” 94% complete (2 bullets lack quantification)
  âš ï¸  Projects        â€” 78% complete (3 projects missing outcome data)
  âŒ Publications      â€” No entries found
  âœ… Skills           â€” 91% complete
  âš ï¸  Open Source     â€” Missing contribution scope on 4 entries
```

This is shown on the dashboard and re-evaluated after every context update.

### 2.6 The Context Update Service

A dedicated lightweight service handles natural-language updates to the context:

- User pastes a paragraph: _"I just finished a 3-month contract at Nethermind where I implemented batched Merkle proof verification in Rust, reducing RPC calls by 60%"_
- The service **parses, structures, and validates** this into the correct context schema
- It prompts for any missing fields before committing
- It detects **duplicates or contradictions** with existing entries and asks for clarification
- All updates are non-destructive â€” original text is preserved alongside the structured entry

---

## 3. The Resume Generation Engine

### 3.1 The Pre-Generation Strategy Pass

Before a single word of resume content is written, the engine runs a **silent strategy pass**:

#### Step 1 â€” JD Parsing

The job description is parsed for:

- **Hard requirements** â€” Must-have skills, years of experience, specific tools/frameworks
- **Soft signals** â€” Preferred qualifications, nice-to-haves, inferred tech culture
- **Role signals** â€” Startup vs. enterprise language, IC vs. leadership focus, research vs. product orientation
- **Keyword inventory** â€” Every technical term that appears in the JD, weighted by frequency and position (title > requirements > responsibilities > about us)

#### Step 2 â€” Fit Scoring

Before generating, the user sees:

```
Job Fit Analysis: Senior Rust Engineer @ ProtocolLabs

  Overall Fit Score:  87 / 100

  âœ… Strong matches:
     â€” Rust systems programming (5+ years in context, JD requires 3+)
     â€” Distributed systems architecture (3 major projects)
     â€” Open source contributions (110+ merged PRs)

  âš ï¸  Partial matches:
     â€” WASM experience (1 project, JD emphasizes heavily)
     â€” P2P networking (adjacent experience, not direct)

  âŒ Gaps:
     â€” libp2p (not in context)
     â€” Go experience (JD lists as preferred)

  Recommendation: Strong application. Consider adding a note about
  WASM usage in VAYU-NET project to strengthen the partial match.
```

#### Step 3 â€” Content Selection Strategy

The engine does not simply include everything and sort. It:

- **Selects** the top N experiences/projects by JD relevance score
- **Excludes** items that consume space without contributing to fit
- **Reframes** selected items â€” the same project described differently for a systems role vs. a protocol research role
- **Decides section weight** â€” for a research-heavy JD, Publications gets promoted; for a pure engineering JD, it may be omitted

#### Step 4 â€” Tone Calibration

The JD language is analyzed for tone:

| JD Tone Detected           | Resume Language Applied                               |
| -------------------------- | ----------------------------------------------------- |
| Aggressive / startup       | "Architected", "Spearheaded", "Owned end-to-end"      |
| Collaborative / enterprise | "Contributed to", "Partnered with", "Supported"       |
| Research-oriented          | "Investigated", "Designed and evaluated", "Published" |
| Product-oriented           | "Shipped", "Delivered", "Reduced user friction by"    |

### 3.2 Generation Constraints

- Target page count: **X pages** (default 1), user-configurable
- Each bullet generated is tagged with its **source context entry ID** â€” no bullet may exist without a traceable source (see Section 8)
- Bullets are generated in **draft form first**, then passed to the layout optimization system before final LaTeX rendering

---

## 4. Layout Optimization System

> This is the hardest engineering problem in the product. It must be solved correctly.

### 4.1 The Line Coverage Contract

Every bullet point on the resume must satisfy the following contract:

| Bullet Length | Coverage Requirement                |
| ------------- | ----------------------------------- |
| 1 line        | â‰¥ 80% horizontal line coverage      |
| 2 lines       | Line 1 = 100%, Line 2 = â‰¥ 70%       |
| > 2 lines     | **PROHIBITED** â€” must be compressed |

No bullet may exceed 2 lines. The system must enforce this as a hard constraint, not a preference.

### 4.2 The 2-Line Promotion Metric

Not every bullet deserves 2 lines. A bullet is eligible for 2 lines only if it scores high on **all three** of the following:

1. **Quantified outcome** â€” contains a measurable result (%, X, $, time)
2. **Technical depth** â€” involves non-trivial technical specificity uncommon in the field
3. **JD relevance** â€” directly maps to a hard requirement or primary soft signal in the JD

If a bullet scores 2 out of 3, it gets 1 line (compressed). If it scores 3 out of 3, it may use 2 lines. There must be **no more than 3 two-line bullets** on a 1-page resume to preserve density balance.

### 4.3 The Layout Simulation Loop

```
[LLM generates draft bullets]
        â†“
[Line-fill simulator runs]
  â€” Measure approximate rendered width per line
  â€” Using font metrics + character width tables for selected font
  â€” Account for LaTeX microtype kerning adjustments
        â†“
[For each bullet that violates contract:]
  â€” If too short (< 80%): prompt LLM to expand with more specificity
  â€” If too long (> 3 lines): prompt LLM to compress, preserve impact
  â€” Re-simulate
        â†“
[Max 3 passes. After 3, flag for human review.]
        â†“
[Send to LaTeX renderer]
```

### 4.4 LaTeX Rendering Stack

- Use **`microtype`** package â€” provides character-level protrusion and font expansion, recovers 3â€“5% space automatically
- Use **`geometry`** package for precise margin control
- Use **`enumitem`** for bullet spacing control (no default LaTeX list bloat)
- Use **`hyperref`** for clickable URL embedding
- Use **`fontspec`** (with XeLaTeX) for custom font support
- Use **`titlesec`** for section header formatting
- The LaTeX template is **parameterized** â€” font, spacing, margins are all variables injected at render time based on user preferences and page-fill analysis

### 4.5 Page Fill Guarantee

The system must not leave visible empty space at the bottom of a page. After layout simulation:

- If remaining whitespace > 8% of page height: the engine adds one additional context item or expands one eligible 1-line bullet to 2 lines
- If content overflows by < 5%: the engine tries compressing 1â€“2 bullets or tightening spacing variables before truncating content
- If content overflows by > 5%: the engine removes the lowest-scoring item and re-runs

---

## 5. The Editing Experience

### 5.1 Interface Architecture

The editing interface is a **split-pane web application**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STRUCTURED EDITOR        â”‚          LIVE PREVIEW            â”‚
â”‚                                  â”‚                                  â”‚
â”‚  [Experience Section â–¼]          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚ â€¢ Tripled bridge relayer â”‚ âœï¸  â”‚  â”‚   [Rendered PDF Preview]   â”‚ â”‚
â”‚  â”‚   throughput from 500 to â”‚    â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚   1,500 TPS under peak   â”‚    â”‚  â”‚                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [+ Add bullet] [ğŸ¤– Suggest]     â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Left pane: structured editor where every bullet is an **editable card**
- Right pane: live PDF preview, re-rendered within ~2 seconds of any edit
- Each card maps to a **specific LaTeX node**, not raw PDF coordinates
- Changes in the editor propagate to LaTeX, not to the PDF directly â€” PDF is always a rendered output

### 5.2 Inline Prompt Editing

Users can select any bullet card (or group of cards) and issue a natural language prompt:

```
Selected: [Bullet about bridge relayer optimization]
Prompt: "Make this sound more research-oriented and mention the algorithm used"

Result: "Engineered a batched Merkle proof verification algorithm for
         cross-chain bridge relayers, improving throughput 3Ã— to 1,500 TPS"
```

Constraints on inline editing:

- The edit is **scoped** to only the selected section â€” the rest of the resume is untouched
- After every inline edit, the layout optimizer re-runs on that section only
- If the edit violates the line coverage contract, the user is warned before applying

### 5.3 Section-Level Controls

Each section has controls:

- **Reorder** â€” drag to reposition within the section or across sections
- **Hide / Show** â€” toggle visibility without deleting
- **Lock** â€” prevent AI from modifying this section in future regenerations
- **Regenerate** â€” re-run AI generation for this section only, using current JD context

### 5.4 Change Tracking

- Every edit (manual or AI-assisted) is tracked
- Users can see a diff view: _what changed from the last generated version_
- One-click revert to any prior state of the resume (not just the context)

---

## 6. User Controls & Customization

### 6.1 Section Management

Users have full control over:

- **Which sections appear** on the resume (toggle on/off)
- **Section order** (drag-and-drop)
- **Section label** (rename "Work Experience" to "Professional Experience" or "Industry Experience")
- **Section-level item limit** â€” e.g., "show max 3 projects", "show max 2 jobs"

### 6.2 Template System

Templar ships with a curated set of templates, each designed for a specific context:

| Template Name | Best For                           | Design Character                  |
| ------------- | ---------------------------------- | --------------------------------- |
| Hacker        | Software engineering, open source  | Minimal, monospace accents, dense |
| Researcher    | Academia, R&D roles                | Clean, publication-ready, formal  |
| Operator      | PM, leadership, strategy           | Spacious, achievement-forward     |
| Founder       | Startups, VC-facing                | Bold headers, startup vocabulary  |
| Classic       | General applications, ATS priority | Plain, highly parseable, safe     |

Each template is a LaTeX template file with parameterized variables. Users cannot break layout by customizing â€” they can only modify **within safe bounds**.

### 6.3 Font Control

Users choose from a curated set of professional fonts:

- Serif: _Garamond, Palatino, EB Garamond_
- Sans-serif: _Inter, Source Sans Pro, Lato_
- Monospace accents: _JetBrains Mono_ (for code/tech sections only)

Font change triggers a full re-render and re-runs the layout simulation (different fonts have different metrics â€” a bullet that fits in Inter may overflow in Garamond).

### 6.4 Resume Personas

A user can maintain **multiple resume personas** from the same context:

```
Persona A: "Backend Systems Engineer"
  â€” Emphasizes: Rust, distributed systems, performance optimization
  â€” Tone: Technical, IC-focused
  â€” Suppressed: Research publications, academic background

Persona B: "Protocol Researcher"
  â€” Emphasizes: Cryptographic verification, consensus, open-source contributions
  â€” Tone: Research-oriented, depth-forward
  â€” Suppressed: General software engineering, tooling work
```

Each persona has its own section order, tone preference, and item selection filter. One context, many resumes.

---

## 7. Intelligence Features

### 7.1 Keyword Gap Report

After generation, the system surfaces:

```
Keyword Gap Analysis:

  JD Keywords NOT in your resume:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Keyword         â”‚ JD Frequency â”‚ Suggested Insertion                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ libp2p          â”‚ 3Ã—           â”‚ No context match â€” consider adding   â”‚
  â”‚ WASM            â”‚ 2Ã—           â”‚ VAYU-NET project (partial match)     â”‚
  â”‚ consensus       â”‚ 1Ã—           â”‚ Supra project (strong match)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

For keywords with context matches, the system offers a **one-click insertion** â€” it finds the best place to naturally incorporate the keyword and shows the before/after.

### 7.2 ATS Mode vs. Human Mode

Two distinct output modes:

**ATS Mode:**

- Standard section headers (no creative naming)
- No tables, columns, or graphical elements
- Keyword density optimized
- Plain hyperlinks (no embedded URLs that ATS can't parse)
- Font: system-safe only

**Human Mode:**

- Visually designed, template-forward
- Embedded hyperlinks, icons, subtle design elements
- Optimized for a human reader's 6-second scan
- May use columns for skills section

The user selects the mode per application. Both modes go through the same layout optimization pipeline.

### 7.3 Application Mode

**Cold application** vs. **Referred application** â€” the system adjusts:

- Cold: higher keyword density, more explicit skill listing, safer language
- Referred: can be more direct, less redundant, personality can come through slightly more

### 7.4 Interview Prep Mode

Based on the generated resume, the system produces:

- A list of **likely interview questions** derived from specific bullets
- For each claim made, a **defense framework**: what data to cite, what to say if pushed
- Flagged bullets where the user's context shows thin evidence â€” _"you may be asked to go deep here, prepare carefully"_

```
Interview Prep for: Senior Rust Engineer @ ProtocolLabs

  From your resume:
  "Tripled bridge relayer throughput from 500 TPS to 1,500 TPS"

  Likely questions:
  1. Walk me through the bottleneck you identified and how you approached it
  2. What was your profiling methodology?
  3. How did you validate the improvement in production?

  Your context shows: Strong evidence (batching, RPC reduction, benchmarks)
  Confidence level: HIGH âœ…
```

### 7.5 Cover Letter Co-Generation

Once the resume is generated and the JD is parsed, the system can produce a **targeted cover letter**:

- Uses the same fit analysis and tone calibration as the resume
- References specific resume bullets to maintain consistency
- Three length options: 3-sentence (cold email), 1 paragraph (portal submission), full letter (formal application)
- Never introduces claims not present in the resume or context

---

## 8. Trust, Accuracy & Anti-Hallucination

> This is one of the most critical systems in the product. A resume with fabricated claims is a liability â€” for the user professionally and for Templar legally and reputationally.

### 8.1 The Grounding Principle

**Every single bullet point generated by Templar must be traceable to a specific, verified entry in the user's context file.**

This is not a preference. It is a **hard architectural constraint** enforced at the generation layer:

```
Generated Bullet: "Architected a GPU-accelerated WGSL shader pipeline
                   for molecular similarity computation in Rust"
Source Tag:       context_entry: proj_003 (GPU Cheminformatics Library)
Grounding Score:  0.96 (direct match, quantified, user-verified)
```

If the LLM attempts to generate a bullet that cannot be mapped to a context entry with a grounding score above a minimum threshold, that bullet is **rejected and regenerated** â€” not shown to the user.

### 8.2 The Grounding Score

Each generated bullet is scored on:

| Dimension            | Weight | Description                                                                                   |
| -------------------- | ------ | --------------------------------------------------------------------------------------------- |
| Source match         | 40%    | Does a context entry directly support this claim?                                             |
| Specificity fidelity | 30%    | Are the specifics (numbers, tools, outcomes) taken directly from context, not inferred?       |
| Scope accuracy       | 20%    | Does the bullet accurately represent the user's role (not over-claiming ownership or impact)? |
| Interpolation risk   | 10%    | Did the LLM fill in details not present in context? (penalized)                               |

Minimum acceptable grounding score: **0.80**. Below this, the bullet is regenerated or flagged for human review.

### 8.3 Scope Accuracy â€” No Inflation

The system explicitly checks for **scope inflation** â€” a common failure mode where an AI turns "contributed to" into "led" or "wrote one module of" into "architected":

- Context entries include contribution type metadata: `sole_author`, `primary_contributor`, `team_member`, `reviewer`
- Generated bullets must match the contribution type. A `team_member` entry cannot produce a bullet saying "Designed and owned..."
- If the user wants to claim more ownership than the context supports, they must **manually update the context first** â€” with real evidence

### 8.4 The Audit Trail

Every generated resume includes a hidden audit manifest (accessible in the dashboard, never shown in the PDF):

```yaml
resume_id: res_2025_07_15_001
generated_for_jd: "Senior Rust Engineer @ ProtocolLabs"
bullets_generated: 14
bullets_grounded: 14
bullets_flagged: 0
average_grounding_score: 0.91
context_version_used: v23
generation_timestamp: 2025-07-15T14:32:00Z
```

This gives the user **full confidence** in what was generated and why.

### 8.5 User Responsibility Boundary

When a user manually edits a bullet (not AI-generated), the system:

- Marks that bullet as `user_edited` in the audit manifest
- Removes the grounding score tag (user takes responsibility)
- Optionally warns: _"This bullet is no longer grounded to your context. Make sure it accurately represents your experience."_

This creates a clear **trust boundary** between AI-generated (verified) and user-edited (user's responsibility) content.

### 8.6 Hallucination Detection at Context Ingestion

The context update service also runs hallucination checks **inbound**:

- If a user tries to store a claim that contradicts a previous entry (e.g., "I was the sole author" for a project previously stored as "team of 4"), it flags the contradiction
- If a claim is extremely anomalous relative to the user's established career trajectory, it prompts for verification
- It does not prevent users from storing what they want â€” it just ensures informed, deliberate choices

---

## 9. Additional Power Features

### 9.1 Confidence Scoring per Bullet (User-Facing)

Each bullet shown in the editor has a visible confidence indicator:

```
â€¢ Tripled bridge relayer throughput from 500 to 1,500 TPS    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘] HIGH
â€¢ Explored post-quantum cryptographic migration strategies    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] MED
â€¢ Contributed to internal tooling for CI/CD pipelines        [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] LOW
```

Low-confidence bullets are candidates for interview pressure â€” the system warns the user to prepare deeper answers for these.

### 9.2 Multi-Page Support

For users applying to senior roles, academia, or submitting CVs (not resumes):

- X-page generation mode (user sets X)
- Page 2+ follow the same layout optimization rules
- Section continuation logic (a section broken across pages has proper visual handling)
- Academic CV mode: Publications section gets full treatment with proper citation formatting

### 9.3 Application Tracker Integration

Templar can maintain a log of every resume generated:

```
Application Log:
  2025-07-15  Senior Rust Engineer     ProtocolLabs   Fit: 87%  Status: Applied
  2025-07-10  Protocol Engineer        Ethereum Fnd.  Fit: 79%  Status: Rejected
  2025-07-03  Systems Engineer         Cloudflare     Fit: 92%  Status: Interview
```

Users can link outcomes (rejected, interview, offer) back to resumes. Over time, the system learns which framing strategies correlate with better outcomes for this user's profile.

### 9.4 Referral Mode

When a user has an internal referral:

- Tone shifts to be more direct and less keyword-stuffed
- A short _"why I'm interested"_ summary paragraph is optionally added at the top
- The cover letter (if generated) is formatted as a warm introduction rather than a cold pitch

### 9.5 Team & Coach Tier

For career coaches or bootcamp instructors managing multiple candidates:

- Shared workspace with individual candidate context files
- Bulk generation: generate tailored resumes for 10 candidates for the same JD
- Comparative fit analysis: see which candidates score highest for a given role
- Coach can edit context on behalf of candidates (with candidate approval)

---

## 10. Business Model & Tiers

| Feature                   | Free | Pro       | Team      | API          |
| ------------------------- | ---- | --------- | --------- | ------------ |
| Context file (entries)    | 20   | Unlimited | Unlimited | Unlimited    |
| Resumes generated / month | 3    | Unlimited | Unlimited | Rate-limited |
| Templates                 | 1    | All       | All       | All          |
| Font options              | 2    | All       | All       | All          |
| Job Fit Analysis          | âœ…   | âœ…        | âœ…        | âœ…           |
| Keyword Gap Report        | âŒ   | âœ…        | âœ…        | âœ…           |
| Inline prompt editing     | âŒ   | âœ…        | âœ…        | âœ…           |
| Cover letter generation   | âŒ   | âœ…        | âœ…        | âœ…           |
| Interview prep mode       | âŒ   | âœ…        | âœ…        | âœ…           |
| Multi-page (CV mode)      | âŒ   | âœ…        | âœ…        | âœ…           |
| Resume personas           | 1    | 5         | Unlimited | Unlimited    |
| Application tracker       | âŒ   | âœ…        | âœ…        | âœ…           |
| Team / coach workspace    | âŒ   | âŒ        | âœ…        | âŒ           |
| Audit manifest export     | âŒ   | âœ…        | âœ…        | âœ…           |

---

## 11. Technical Architecture

### 11.1 Services Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT (Web App)                        â”‚
â”‚   Split-pane editor  |  Live PDF preview  |  Dashboard          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ REST / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API GATEWAY                             â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚              â”‚              â”‚              â”‚
   â–¼              â–¼              â–¼              â–¼
Context       Generation      Layout         Render
Service       Service         Optimizer      Service
   â”‚              â”‚              â”‚              â”‚
   â”‚        (LLM calls)   (Simulation     (LaTeX â†’
   â”‚                        loop)          PDF via
   â”‚                                      MiniTeX /
   â”‚                                      Tectonic)
   â–¼
Context Store
(Versioned .md
 + metadata DB)
```

### 11.2 Key Technology Choices

| Component       | Technology                      | Rationale                                                    |
| --------------- | ------------------------------- | ------------------------------------------------------------ |
| LaTeX engine    | Tectonic (Rust-based) or MiKTeX | Tectonic is self-contained, no TeX Live install needed, fast |
| Line simulation | Custom font-metrics lib         | Character width tables per font + heuristic line-break model |
| LLM             | Claude API (claude-sonnet)      | Strong instruction-following for constrained generation      |
| Context store   | PostgreSQL + S3 for `.md` files | Relational metadata, flat file for raw context               |
| PDF preview     | PDF.js in browser               | Native, no dependencies                                      |
| Diff engine     | diff-match-patch                | For resume change tracking                                   |
| Auth            | Clerk / Supabase Auth           | Fast to ship, solid for MVP                                  |

### 11.3 LaTeX Packages Required

```latex
\usepackage{microtype}      % Character-level optimization
\usepackage{geometry}       % Precise margin control
\usepackage{enumitem}       % List spacing control
\usepackage{hyperref}       % Clickable URLs
\usepackage{fontspec}       % Custom fonts (XeLaTeX)
\usepackage{titlesec}       % Section header formatting
\usepackage{xcolor}         % Color support for templates
\usepackage{tabularx}       % For multi-column layouts
\usepackage{parskip}        % Paragraph spacing control
```

### 11.4 Context Update Flow

```
User input (natural language)
        â†“
Parse & structure (LLM with schema)
        â†“
Impact validation check
  â†’ Missing quantification? â†’ Prompt user
  â†’ Contradiction detected? â†’ Flag & ask
  â†’ Duplicate detected? â†’ Merge or reject
        â†“
Grounding metadata attached
        â†“
Versioned commit to context store
        â†“
Completeness score recalculated
        â†“
User notified of changes
```

---

## 12. Open Problems & Engineering Challenges

These are known hard problems that require deliberate engineering solutions, not assumptions:

**Line-fill simulation accuracy** â€” Font metric tables are approximations. LaTeX's actual line-breaking uses the Knuth-Plass algorithm which considers the entire paragraph, not just individual lines. The simulation must account for this or accept a small margin of error (and run a post-render check).

**Font-dependent layout variance** â€” The same content in Garamond vs. Inter can differ by 5â€“8% in rendered width. Every font change must trigger a full layout re-simulation.

**LLM compression quality** â€” Asking an LLM to compress a bullet to fit a line-width constraint is imprecise. The model cannot directly measure rendered width. The simulation loop must handle this by iterating, not by trusting the LLM's first attempt.

**PDF editability** â€” PDFs are not designed for editing. The architecture deliberately avoids "editable PDFs" in favor of a structured editor that re-renders to PDF. This is the correct tradeoff. The downside is that the live preview must be fast enough to feel responsive (target: < 2 seconds for a section-level re-render).

**Grounding score calibration** â€” The grounding score thresholds (0.80 minimum) need empirical calibration. Too strict and the system becomes useless for legitimate creative reframing. Too loose and hallucinations slip through. This likely requires a human evaluation dataset and iterative tuning.

**Multi-language support** â€” Non-Latin character sets (CJK, Arabic, Devanagari) have entirely different line-width characteristics. Font-metric tables must be extended for global use.

---

_Document version: 0.1 â€” Initial specification_
_Author: PsychoPunkSage_
_Status: Working draft â€” all sections subject to revision_
